+function(a){"use strict";var b=[];a(document).ready(function(){a("[data-of-modal]").each(function(d,e){b[a(this).data("of-modal")]=new c(e)})});var c=function(c,d){this.parseOptions=function(b){var c={fadeDuration:250};if("undefined"==typeof b)return c;for(var d in b)c[d]=b[d];return c.windowHeight=a(window).height(),c},this.visible=!1,this.backdrop=".of-modal-backdrop",this.$backdrop=a(this.backdrop),this.element=c,this.$element=a(c),this.options=this.parseOptions(d),this.hasLoaded=!1,this.show=function(){if(!this.visible){if(this.hasLoaded!==!0&&"undefined"!=typeof this.$element.data("of-modal-iframe")){var b=this,c=b.$element,d=c.find("iframe");c.ofLoading(),d.attr("src",d.data("src")),d.on("load",function(){c.ofLoading(!1),c.css("top",(b.options.windowHeight-b.$element.height())/2-30+"px"),b.hasLoaded=!0,a(d.contents()[0]).on("keyup",function(a){var c=a.keyCode?a.keyCode:a.which;27===c&&b.hide()})})}if(this.hasLoaded!==!0&&"undefined"!=typeof this.$element.data("of-modal-ajax")){var b=this,c=b.$element,e=c.data("of-modal-ajax");c.ofLoading(),a.ajax({dataType:"json",type:"GET",url:e}).success(function(a){if(console.log(a),"object"!=typeof a)return!1;for(var d=0,e=a.metaline.length;e>d;d++){var f=a.metaline[d];console.log(f)}c.find("header h2").text(a.id),c.find("article").html(a.name),c.css("top",(b.options.windowHeight-b.$element.height())/2-30+"px"),c.ofLoading(!1),b.hasLoaded=!0})}this.visible=!0,this.$element.css("top",(this.options.windowHeight-this.$element.height())/2-30+"px").addClass("in of-visible"),this.$backdrop.addClass("in of-visible"),a("body").addClass("of-modal-active")}},this.hide=function(){var b=this.$backdrop,c=this.$element;this.visible&&(this.visible=!1,c.removeClass("of-visible"),b.removeClass("of-visible"),a("body").removeClass("of-modal-active"),setTimeout(function(){c.removeClass("in"),b.removeClass("in")},this.options.fadeDuration))},this.toggle=function(){this.visible!==!0?this.show():this.hide()},this.bindUiActions=function(){var c=this;a(document).on("click","[data-of-open-modal]",function(c){c.preventDefault();var d=a(this).data("of-open-modal");return"undefined"!=typeof b[d]?(b[d].show(),void a(window).trigger("resize")):void console.error('Modal "'+d+'" does not exist.')}).on("click touchend",this.backdrop+", [data-of-close-modal]",function(a){a.stopPropagation(),c.hide()}).on("keyup",function(a){var b=a.keyCode?a.keyCode:a.which;27===b&&c.hide()}),a(window).resize(function(){c.options.windowHeight=a(window).height();var b=(c.options.windowHeight-c.$element.height()-30)/2+"px";parseFloat(b)>29?c.$element.addClass("of-modal-overflow"):c.$element.removeClass("of-modal-overflow"),c.$element.css("top",parseFloat(b)+"px")})},this.bindUiActions()}}(jQuery);